#!/usr/bin/env python
# -*- coding: utf-8 -*-
# vim: tabstop=4 shiftwidth=4 softtabstop=4

# Copyright (c) 2010-2011, GEM Foundation.
#
# OpenQuake is free software: you can redistribute it and/or modify
# it under the terms of the GNU Lesser General Public License version 3
# only, as published by the Free Software Foundation.
#
# OpenQuake is distributed in the hope that it will be useful,
# but WITHOUT ANY WARRANTY; without even the implied warranty of
# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
# GNU Lesser General Public License version 3 for more details
# (a copy is included in the LICENSE file that accompanied this code).
#
# You should have received a copy of the GNU Lesser General Public License
# version 3 along with OpenQuake.  If not, see
# <http://www.gnu.org/licenses/lgpl-3.0.txt> for a copy of the LGPLv3 License.


"""
This tool is used for performing garbage collection on OpenQuake KVS cache
data.

  -h | --help   : prints this help string
  -j | --job J  : clear KVS cache data for the given job ID
  -l | --list   : list currently cached jobs
"""

import getopt
import logging
import sys


SHORT_ARGS = 'hlj:'
LONG_ARGS = ['help', 'job=', 'list']
# map short args to long args
S2L = dict(h='help', j='job=', l='list')


def main(cl_args):
    """
    :param cl_args: command line arguments
    :type cl_cargs: list of strings
    """

def list_cached_jobs():
    """
    List the jobs which are currently cached in the KVS.

    Invoked by the -l or --list command line arg.
    """


def clear_job_data(job_id):
    """
    Clear KVS cache data for the given job. This is done by searching in the
    KVS for keys matching a job key (derived from the job_id) and deleting each
    result.

    Invoked by the -j or --job command line arg.

    :param job_id: numerical job ID
    :type job_id: int
    """


def show_help():
    """
    Display help documentation for this utility.
    """
    print __doc__


if __name__ == '__main__':
    main(sys.argv[1:])
